(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{108:function(e,a,t){e.exports=t(127)},116:function(e,a,t){},117:function(e,a,t){},127:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(87),c=t.n(o),i=(t(116),t(117),t(184)),l=t(183),s=t(179),m=t(190),d=t(188),u=t(185);var h=e=>{let{forecast:a}=e;return r.a.createElement(i.a,{className:"forecast-item",sx:{textAlign:"center",my:2}},r.a.createElement(d.a,{variant:"h6"},new Date(a.dt_txt).toLocaleDateString("en-US",{weekday:"short"})),r.a.createElement(d.a,{variant:"body2"},"Temperature: ".concat(a.main.temp,"\xb0C")),r.a.createElement(d.a,{variant:"body2"},"Humidity: ".concat(a.main.humidity,"%")),r.a.createElement(d.a,{variant:"body2"},"Wind Speed: ".concat(a.wind.speed," km/h")),r.a.createElement("img",{src:"https://openweathermap.org/img/w/".concat(a.weather[0].icon,".png"),alt:"Weather Icon",sx:{width:50,height:"auto",mt:1}}))};var p=e=>{let{forecasts:a}=e;return r.a.createElement("div",null,r.a.createElement("h3",null," Weather Forecast of coming days: "),r.a.createElement(u.a,{container:!0,spacing:2,justifyContent:"center"},a.map((e,a)=>r.a.createElement(u.a,{item:!0,key:a},r.a.createElement(h,{forecast:e})))))},g=t(189);var y=(e,a)=>"Clear"===e?"Nice weather today, you might not need a hat today.":"Rain"===e||"Drizzle"===e?"Rain is expected today, consider bringing a waterproof hat.":a>15?"Windy conditions are expected, a hat or cap can help.":"You might consider a hat today but its not mandatory.";var b=(e,a)=>"Clear"===e?a>25?"Sandals or breathable shoes are recommended.":"Any standard shoes are suitable today.":"Rain"===e||"Drizzle"===e?"Rain is expected today, waterproof or water-resistant shoes are advised.":"Nice weather, You can wear any comfortable shoes today.";var f=(e,a)=>"Clear"===e?"Consider wearing sunglasses or a light scarf today. Have a great day!":"Rain"===e||"Drizzle"===e?"Rain expected, an umbrella or raincoat is recommended today. Have a great day!":a>70?"Humid weather, consider a light hat or scarf today. Have a great day!":" Carry a light scarf or sunglasses today. Have a great day!";var E=(e,a,t)=>e<5?"It's very cold today, wear a heavy coat and multiple layers.":e>=5&&e<15?t>.5?"Cool weather with rain, wear a raincoat or waterproof jacket today.":"Cool weather today, wear a light jacket or sweater.":e>=15&&e<25?a>15?"Breezy conditions today, wear a windbreaker or light jacket.":" A T-shirt with light layers is sufficient today.":"Hot weather today, wear light and breathable clothing.";var v=e=>e>.5?"Heavy rain expected today, bring a waterproof coat or umbrella.":e>.2?"Light rain expected today, consider carrying a raincoat or umbrella.":"Less chances of rain today, coat is optional.";var w=e=>{let{weatherData:a}=e;if(!a)return null;const{main:t,weather:n,wind:o}=a,c=t.temp_min,i=o.speed,l=n[0].description,s=t.humidity,m=a.rain,h=m&&(m["1h"]||m["3h"])||0;return r.a.createElement(u.a,{sx:{mt:4},style:{display:"flex",justifyContent:"center"}},r.a.createElement(g.a,{sx:{maxWidth:500,backgroundColor:"transparent",shadowOpacity:0}},r.a.createElement(d.a,{variant:"h4",sx:{mb:2}},"Recommendations:"),r.a.createElement(d.a,{variant:"body1",sx:{mb:2}},"Hat: ",y(l,i)),r.a.createElement(d.a,{variant:"body1",sx:{mb:2}},"Cloths: ",E(c,i,h)),r.a.createElement(d.a,{variant:"body1",sx:{mb:2}},"Jackets: ",v(h)),r.a.createElement(d.a,{variant:"body1",sx:{mb:2}},"Accessories: ",f(l,s)),r.a.createElement(d.a,{variant:"body1",sx:{mb:2}},"Shoes: ",b(l,c))))};var x=e=>({"01d":"\u2600\ufe0f","01n":"\ud83c\udf15","02d":"\u26c5\ufe0f","02n":"\ud83c\udf19","03d":"\ud83c\udf25\ufe0f","03n":"\ud83c\udf25\ufe0f","04d":"\u2601\ufe0f","04n":"\u2601\ufe0f","09d":"\ud83c\udf27\ufe0f","09n":"\ud83c\udf27\ufe0f","10d":"\ud83c\udf26\ufe0f","10n":"\ud83c\udf27\ufe0f","11d":"\u26c8\ufe0f","11n":"\u26c8\ufe0f","13d":"\ud83c\udf28\ufe0f","13n":"\ud83c\udf28\ufe0f","50d":"\ud83c\udf2b\ufe0f","50n":"\ud83c\udf2b\ufe0f"}[e]),k=t(187);var C=e=>{let{unit:a,onUnitChange:t}=e;return r.a.createElement(i.a,{sx:{mb:2,textAlign:"center"}},r.a.createElement(k.a,{variant:"contained","aria-label":"outlined primary button group"},r.a.createElement(m.a,{onClick:()=>t("metric"),variant:"metric"===a?"contained":"outlined"},"\xb0C"),r.a.createElement(m.a,{onClick:()=>t("imperial"),variant:"imperial"===a?"contained":"outlined"},"\xb0F")))},S=t(71),j=t.n(S),I=t(89),W=t.n(I),O=t(90),F=t.n(O),P=t(91),A=t.n(P),D=t(92),R=t.n(D),z=t(93),H=t.n(z),T=t(66),L=t.n(T),B=t(191);var q=()=>r.a.createElement(i.a,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"}},r.a.createElement(B.a,null));var U=()=>{const[e,a]=Object(n.useState)(""),[t,o]=Object(n.useState)(null),[c,u]=Object(n.useState)(null),[h,g]=Object(n.useState)("metric"),[y,b]=Object(n.useState)(!1),[f,E]=Object(n.useState)(j.a),v="3250caf2959d77ff33ddc5ebcb2c57d4";return r.a.createElement(i.a,{sx:{backgroundImage:"url(".concat(f,")"),backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"white",textShadow:"1px 1px 4px rgba(0,0,0,0.8)",transition:"background-image 0.5s ease-in-out"}},r.a.createElement(l.a,{maxWidth:"md",sx:{backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"8px",padding:"20px"}},r.a.createElement(i.a,{sx:{mt:4}},r.a.createElement(s.a,{id:"search-input",label:"Enter a city name",variant:"outlined",fullWidth:!0,value:e,onChange:e=>a(e.target.value),sx:{mb:2}}),r.a.createElement(m.a,{id:"search-button",variant:"contained",color:"primary",onClick:async()=>{b(!0);try{const a=await fetch("".concat("https://api.openweathermap.org/data/2.5/weather","?q=").concat(e,"&appid=").concat(v,"&units=metric"));if(!a.ok)throw 401===a.status?new Error("Unauthorized - Please check your API key"):404===a.status?new Error("City not found"):new Error("Failed to fetch weather data");const t=await a.json();o(t);const n=t.weather[0].description.toLowerCase();let r=j.a;r=n.includes("clear")?j.a:n.includes("cloud")?W.a:n.includes("rain")||n.includes("shower")?F.a:n.includes("snow")?A.a:n.includes("fog")?R.a:n.includes("thunder")||n.includes("storm")?H.a:L.a,E(r);const c=await fetch("".concat("https://api.openweathermap.org/data/2.5/forecast","?q=").concat(e,"&appid=").concat(v,"&units=metric"));if(!c.ok)throw 401===c.status?new Error("Unauthorized - Please check your API key"):404===c.status?new Error("Forecast data not available"):new Error("Failed to fetch forecast data");const i=(await c.json()).list.filter((e,a)=>a%8===0);u(i)}catch(a){console.error("Error fetching data:",a.message)}finally{b(!1)}},sx:{mb:2}},"Search")," ",y&&r.a.createElement(q,null),t&&!y&&r.a.createElement(i.a,{id:"weather-container",sx:{textAlign:"center"}},r.a.createElement(d.a,{variant:"h4",component:"h2",sx:{mt:2}},t.name),r.a.createElement(d.a,{variant:"body1"},"Temperature: ".concat((k=t.main.temp,"imperial"===h?"".concat(Math.round(9*k/5+32),"\xb0F"):"".concat(Math.round(k),"\xb0C"))),r.a.createElement(C,{unit:h,onUnitChange:e=>{g(e)}})),r.a.createElement(d.a,{variant:"body1"},"Humidity: ".concat(t.main.humidity,"%")),r.a.createElement(d.a,{variant:"body1"},"Wind Speed: ".concat(t.wind.speed," km/h")),r.a.createElement(d.a,{variant:"body1",sx:{mb:2}},x(t.weather[0].icon)," ",t.weather[0].description))),r.a.createElement(i.a,{sx:{textAlign:"center"}},r.a.createElement(w,{weatherData:t}),c&&r.a.createElement(p,{forecasts:c}))));var k},N=t(182),G=t(178),J=t(94);var M=Object(J.a)({palette:{primary:{main:"#007bff"},secondary:{main:"#ff4081"},text:{primary:"#ffffff",secondary:"#000000"}},typography:{fontFamily:"Georgia, serif",h2:{color:"#ffffff",textShadow:"2px 2px 4px rgba(0, 0, 0, 0.5)"},h6:{color:"#ffffff",textShadow:"2px 2px 4px rgba(0, 0, 0, 0.5)"},button:{color:"#ffffff"}}}),Y=t(192),_=t(193),V=t(194),K=t(25);var Q=e=>{let{isAuthenticated:a,onLogout:t}=e;return r.a.createElement(Y.a,{position:"static"},r.a.createElement(_.a,null,r.a.createElement(V.a,{edge:"start",color:"inherit","aria-label":"menu"}),r.a.createElement(d.a,{variant:"h6",component:"div",sx:{flexGrow:1}},"Weather & Dress Recommendation Dashboard"),r.a.createElement(m.a,{component:K.b,to:"/",color:"inherit"},"Home"),a?r.a.createElement(m.a,{color:"inherit",onClick:t},"Logout"):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{component:K.b,to:"/login",color:"inherit"},"Login"),r.a.createElement(m.a,{component:K.b,to:"/register",color:"inherit"},"Register"))))},X=t(8),Z=t(180);var $=e=>{let{setIsAuthenticated:a}=e;const[t,o]=Object(n.useState)(""),[c,u]=Object(n.useState)(""),[h,p]=Object(n.useState)(""),g=Object(X.p)();return Object(n.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("token");if(e){const t=await Z.a.get("http://localhost:3000/api/auth/verify",{headers:{Authorization:"Bearer ".concat(e)}});console.log("Token is valid:",t.data),a(!0)}}catch(e){console.error("Token verification failed:",e.response?e.response.data:e.message),a(!1)}})()},[a]),r.a.createElement(l.a,{component:"main",maxWidth:"xs"},r.a.createElement(i.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(d.a,{component:"h1",variant:"h5"},"Login"),r.a.createElement(s.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:t,onChange:e=>o(e.target.value),InputProps:{style:{color:"black"}}}),r.a.createElement(s.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:c,onChange:e=>u(e.target.value),InputProps:{style:{color:"black"}}}),r.a.createElement(m.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:async()=>{try{const e=await Z.a.post("http://localhost:5000/api/auth/login",{username:t,password:c});p("Login successful"),localStorage.setItem("token",e.data.token),a(!0),g("/welcome")}catch(e){p("Login failed, If you are new User, try registration first: ")}}},"Login"),h&&r.a.createElement(d.a,{color:"error"},h),r.a.createElement(K.b,{to:"/welcome",variant:"body2"},"Go to Welcome Page")))};var ee=()=>{const[e,a]=Object(n.useState)(""),[t,o]=Object(n.useState)(""),[c,u]=Object(n.useState)("");return r.a.createElement(l.a,{component:"main",maxWidth:"xs"},r.a.createElement(i.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(d.a,{component:"h1",variant:"h5"},"Register"),r.a.createElement(s.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:e,onChange:e=>a(e.target.value),InputProps:{style:{color:"black"}}}),r.a.createElement(s.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:t,onChange:e=>o(e.target.value),InputProps:{style:{color:"black"}}}),r.a.createElement(m.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:async()=>{try{await Z.a.post("http://localhost:5000/api/auth/register",{username:e,password:t}),u("Registration successful. Please log in.")}catch(r){var a,n;const e=(null===(a=r.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)||"An error occurred during registration.";u("Registration failed: "+r.response.data.message),console.log(e)}}},"Register"),c&&r.a.createElement(d.a,{color:"error"},c)))};var ae=()=>{const[e,a]=Object(n.useState)(""),[t,o]=Object(n.useState)("");return r.a.createElement(l.a,{component:"main",maxWidth:"xs"},r.a.createElement(i.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center",color:"black"}},r.a.createElement(d.a,{variant:"h4",gutterBottom:!0},"Welcome"),r.a.createElement(d.a,{variant:"body1"},"You are logged in. Please write your favoirite cities to see weather forcast!"),r.a.createElement(s.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"city",label:"Favorite City",name:"city",autoComplete:"city",autoFocus:!0,value:e,onChange:e=>{a(e.target.value)},InputProps:{style:{color:"black"}}}),r.a.createElement(m.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:async()=>{try{const t=localStorage.getItem("token");200===(await Z.a.post("http://localhost:3000/api/cities",{name:e},{headers:{Authorization:"Bearer ".concat(t)}})).status?console.log("Token is valid"):console.log("Token is invalid"),o("City saved successfully!"),a("")}catch(t){console.error("Error saving city:",t),o("Error saving city")}}},"Save City"),t&&r.a.createElement(d.a,{color:"error"},t),r.a.createElement(i.a,{mt:2},r.a.createElement(K.b,{to:"/cities"},r.a.createElement(m.a,{variant:"contained"},"View Favorite Cities")))))},te=t(195);var ne=()=>{const[e,a]=Object(n.useState)([]),[t,o]=Object(n.useState)({}),[c,s]=Object(n.useState)(!0),m="3250caf2959d77ff33ddc5ebcb2c57d4";return Object(n.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("token"),t=await Z.a.get("http://localhost:3000/api/cities",{headers:{Authorization:"Bearer ".concat(e)}});a(t.data)}catch(e){console.error("Error fetching cities:",e)}})()},[]),Object(n.useEffect)(()=>{e.length>0&&(async()=>{const a=e.map(async e=>{try{const a=await Z.a.get("".concat("https://api.openweathermap.org/data/2.5/weather","?q=").concat(e.name,"&appid=").concat(m,"&units=metric"));return{city:e.name,data:a.data}}catch(a){return console.error("Error fetching weather data for ".concat(e.name,":"),a),{city:e.name,data:null}}}),t=(await Promise.all(a)).reduce((e,a)=>(e[a.city]=a.data,e),{});o(t),s(!1)})()},[e,m]),c?r.a.createElement(l.a,null,r.a.createElement(i.a,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},r.a.createElement(B.a,null))):r.a.createElement(l.a,{className:"sky",style:{backgroundImage:"url(".concat(L.a,")"),backgroundSize:"cover",backgroundPosition:"center",minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",color:"black"}},r.a.createElement(i.a,null,r.a.createElement(d.a,{variant:"h4",gutterBottom:!0},"Favorite Cities and Weather Forecast"),r.a.createElement(u.a,{container:!0,spacing:3},e.map(e=>r.a.createElement(u.a,{item:!0,xs:12,sm:6,md:4,key:e._id},r.a.createElement(g.a,{variant:"outlined",sx:{p:2,mb:2,backgroundColor:"rgba(255, 255, 255, 0.2)",color:"black",borderColor:"rgba(255, 255, 255, 0.5)"}},r.a.createElement(te.a,null,r.a.createElement(d.a,{variant:"h6"},e.name),t[e.name]?r.a.createElement(i.a,null,r.a.createElement(g.a,{variant:"outlined",sx:{p:2,mb:2,backgroundColor:"rgba(255, 255, 255, 0.2)",color:"black",borderColor:"rgba(255, 255, 255, 0.5)"}},r.a.createElement(d.a,{variant:"h6"},"Weather Data:"),r.a.createElement(d.a,{variant:"body2"},"Temperature: ".concat(t[e.name].main.temp,"\xb0C")),r.a.createElement(d.a,{variant:"body2"},"Humidity: ".concat(t[e.name].main.humidity,"%")),r.a.createElement(d.a,{variant:"body2"},"Wind Speed: ".concat(t[e.name].wind.speed," km/h")),r.a.createElement(d.a,{variant:"body2"},t[e.name].weather[0].description)),r.a.createElement(g.a,{variant:"outlined",sx:{p:2,mb:2,backgroundColor:"rgba(255, 255, 255, 0.2)",color:"black",borderColor:"rgba(255, 255, 255, 0.5)"}},r.a.createElement(w,{weatherData:t[e.name],variant:"outlined"}))):r.a.createElement(d.a,{variant:"body2"},"Weather data not available"))))))))};var re=function(){const[e,a]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{(async()=>{if(localStorage.getItem("token"))try{const e=localStorage.getItem("token");200===(await Z.a.get("http://localhost:5000/api/auth/verify",{headers:{Authorization:"Bearer ".concat(e)}})).status?console.log("Token is valid"):console.log("Token is invalid"),a(!0)}catch(e){a(!1)}})()},[]),r.a.createElement(K.a,null," ",r.a.createElement(N.a,{theme:M},r.a.createElement(G.a,null),r.a.createElement(Q,{isAuthenticated:e,onLogout:()=>{localStorage.removeItem("token"),a(!1)}}),r.a.createElement(X.d,null,r.a.createElement(X.b,{path:"/",element:r.a.createElement(U,null)}),r.a.createElement(X.b,{path:"/login",element:r.a.createElement($,{setIsAuthenticated:a})}),r.a.createElement(X.b,{path:"/register",element:r.a.createElement(ee,null)}),r.a.createElement(X.b,{path:"/welcome",element:r.a.createElement(ae,null)}),r.a.createElement(X.b,{path:"/cities",element:e?r.a.createElement(ne,null):r.a.createElement(X.a,{to:"/login"})}))))};var oe=e=>{e&&e instanceof Function&&t.e(3).then(t.bind(null,196)).then(a=>{let{getCLS:t,getFID:n,getFCP:r,getLCP:o,getTTFB:c}=a;t(e),n(e),r(e),o(e),c(e)})};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null))),oe()},66:function(e,a,t){e.exports=t.p+"static/media/sky.a1e77f9f.jpg"},71:function(e,a,t){e.exports=t.p+"static/media/Clear.e91aea63.jpg"},89:function(e,a,t){e.exports=t.p+"static/media/Cloudy.c7900514.jpg"},90:function(e,a,t){e.exports=t.p+"static/media/Rainy.f04ec4b0.jpg"},91:function(e,a,t){e.exports=t.p+"static/media/snow.aebace38.jpg"},92:function(e,a,t){e.exports=t.p+"static/media/fog.691c738c.png"},93:function(e,a,t){e.exports=t.p+"static/media/Stormy.9a47bbd1.jpg"}},[[108,1,2]]]);
//# sourceMappingURL=main.41da4f2a.chunk.js.map